# 中国象棋游戏

一个功能完整的中国象棋游戏，使用Java Swing开发，实现了完整的游戏规则和优美的界面设计。

## 功能特性

### 核心玩法
- **双人对战**：两个玩家在同一台电脑上轮流下棋
- **人机对战**：使用Minimax算法和Alpha-Beta剪枝的AI对手
- **残局练习**：包含多个经典残局（七星聚会、蚯蚓降龙、千里独行、野马操田）
- **开局随机先手**：每局游戏先手随机，增加趣味性
- **人机对战中人类执红**：人类玩家总是执红方（棋盘下侧），符合传统习惯

### 完整规则实现
- ✅ 将/帅：九宫内横竖走一步
- ✅ 士/仕：九宫内斜走一步
- ✅ 象/相：田字移动，不能过河，塞象眼
- ✅ 馬：日字移动，蹩马腿
- ✅ 車：横竖任意走，不能越子
- ✅ 炮/砲：走法同车，吃子需翻山
- ✅ 兵/卒：过河前只能前行，过河后可横走，不能后退
- ✅ 将帅对面规则：将帅不能在同一直线上直接对面
- ✅ 将军检测与解将

### 胜负判定
- ✅ 将死：被将军且无法解将
- ✅ 困毙：无子可动但未被将军
- ✅ 认输：点击认输按钮认输
- ✅ 超时：10分钟计时，超时判负

### 界面特性
- ✅ **可移动位置提示**：选择棋子后显示所有可移动的位置（绿色小圆点）
- ✅ **可吃子位置提示**：可吃子的位置用红色圆圈标记
- ✅ **落棋位置标记**：用绿色框标记最后一着的起点和终点位置
- ✅ **将军警告**：被将军时将帅周围显示红色警告框
- ✅ **精美棋子设计**：带有渐变效果和阴影的棋子
- ✅ **棋盘边框**：圆角边框设计
- ✅ **交叉点标记**：炮位和兵卒位有特殊的交叉点标记
- ✅ **计时器显示**：双方各10分钟，少于1分钟时变红警告
- ✅ **当前回合显示**：显示当前是哪方走棋，将军时提示

## 项目结构

```
XiangqiGame/
├── src/
│   └── main/
│       └── java/
│           └── com/
│               └── xiangqi/
│                   ├── model/                      # 数据模型
│                   │   ├── Board.java              # 棋盘类 (572行)
│                   │   ├── Piece.java              # 棋子类
│                   │   ├── PieceColor.java         # 棋子颜色枚举
│                   │   ├── PieceType.java          # 棋子类型枚举
│                   │   └── Move.java               # 移动类
│                   ├── ui/                         # 用户界面
│                   │   ├── XiangqiPanel.java       # 棋盘面板 (537行)
│                   │   └── XiangqiFrame.java       # 主窗口 (370行)
│                   ├── ai/                         # AI算法
│                   │   └── MinimaxAI.java          # Minimax AI
│                   └── controller/                 # 游戏控制
│                       ├── GameController.java     # 游戏控制器 (264行)
│                       └── EndgameLoader.java      # 残局加载器
├── pom.xml                                  # Maven配置
├── README.md                                # 项目说明文档
├── XiangqiGame.iml                          # IDEA模块文件
├── .idea/runConfigurations/                  # IDEA运行配置
└── 运行游戏.bat                              # Windows启动脚本
```

## 如何在IntelliJ IDEA中运行

### 方法一：直接打开项目
1. 打开IntelliJ IDEA
2. 选择 `File` -> `Open`
3. 选择 `D:\claude项目\XiangqiGame` 文件夹
4. IDEA会自动识别Maven项目并导入
5. 等待依赖加载完成
6. 找到 `src/main/java/com/xiangqi/ui/XiangqiFrame.java`
7. 右键点击 `main` 方法，选择 `Run 'XiangqiFrame.main()'`

### 方法二：使用Maven命令
1. 在项目根目录打开终端
2. 编译项目：`mvn clean compile`
3. 运行项目：`mvn exec:java -Dexec.mainClass="com.xiangqi.ui.XiangqiFrame"`

### 方法三：打包成JAR运行
1. 在项目根目录打开终端
2. 打包：`mvn clean package`
3. 运行：`java -jar target/XiangqiGame-1.0.0.jar`

### 方法四：使用启动脚本
- 直接双击 `运行游戏.bat` 即可运行

## 游戏操作

### 双人对战模式
1. 点击"双人对战"按钮开始游戏
2. 点击己方棋子选中（会显示绿色高亮）
3. 可移动位置会显示为绿色小圆点
4. 可吃子的位置会显示为红色圆圈
5. 点击目标位置完成移动

### 人机对战模式
1. 点击"人机对战"按钮开始游戏
2. 你总是执红方（棋盘下侧）
3. 开局先手随机
4. 按照双人对战的方式操作

### 残局练习
- 从菜单或侧边栏选择残局：
  - **七星聚会**：经典车炮对车炮残局
  - **蚯蚓降龙**：双车对炮马卒的复杂残局
  - **千里独行**：车马对车兵的残局
  - **野马操田**：车马对车双兵的残局

### 其他操作
- **重新开始**：点击重新开始按钮重置游戏
- **认输**：点击认输按钮可以认输（会弹出确认对话框）
- **查看规则**：从帮助菜单查看完整规则
- **关于**：从帮助菜单查看关于信息

## 棋子走法详解

| 棋子 | 走法 | 特殊规则 |
|------|------|----------|
| 将/帅 | 九宫内横竖走一步 | 将帅不能在同一直线上直接对面（中间无棋子） |
| 士/仕 | 九宫内斜走一步 | - |
| 象/相 | 走田字，移动2格 | 不能过河，田字中心有子时不能通过（塞象眼） |
| 馬/馬 | 走日字 | 第一步直行或横行处有子挡住则不能通过（蹩马腿） |
| 車/車 | 横竖任意走 | 不能越子 |
| 炮/砲 | 走法同车 | 吃子时必须跳过一个棋子（翻山） |
| 兵/卒 | 过河前只能前行 | 过河后增加横走能力，永远不能后退 |

## 胜负判定规则

### 将死
- 一方的将/帅被对方将军（可以被吃掉），且无法解将，则判负。

### 困毙
- 轮到一方走棋时，所有棋子都无合法移动，且未被将军，则判负。

### 认输
- 任意一方点击认输按钮确认后，即判负。

### 超时
- 双方各10分钟思考时间，超时方判负。

## 界面说明

### 棋盘区域
- **木纹背景**：仿木纹颜色棋盘背景
- **棋盘线**：棕色线条
- **楚河汉界**：棋盘中间的河流区域
- **九宫格**：上下两侧的斜线区域

### 标记说明
- **绿色选中框**：选中的棋子周围有绿色高亮
- **绿色小圆点**：可以移动到的空位
- **红色圆圈**：可以吃掉的对方棋子
- **绿色框**：最后一着落棋的起点和终点
- **红色警告框**：被将军时将帅周围的警告框

### 计时器
- **红方时间**：红方剩余时间
- **黑方时间**：黑方剩余时间
- **当前回合**：显示当前是哪方走棋
- **低时间警告**：剩余时间少于1分钟时变红

## 技术实现

### AI算法
- **Minimax算法**：递归搜索可能的走法
- **Alpha-Beta剪枝**：优化搜索效率，大幅减少计算量
- **位置估值**：基于棋子价值和位置优势的评估函数
  - 将/帅：10000分
  - 車：900分
  - 炮：450分
  - 馬：400分
  - 相/象/士/仕：200分
  - 兵/卒：100分 + 过河奖励

### 游戏规则
- 完整实现了中国象棋的所有走棋规则
- 包括：将帅对面、马撇脚、象塞象眼、炮翻山等特殊规则
- 将军检测和将死判断
- 困毙判断（无子可动）

## 系统要求

- Java 11 或更高版本
- IntelliJ IDEA（推荐）或其他Java IDE
- Maven 3.6+（如果使用命令行构建）

## 开发环境

- 开发语言：Java 11
- UI框架：Swing
- 构建工具：Maven
- AI算法：Minimax + Alpha-Beta剪枝
- 搜索深度：3层（可调整）

## 版本历史

### v1.0 (2026-02-15)
- 实现完整的游戏规则
- 双人对战功能
- 人机对战功能
- 经典残局
- 10分钟计时模式
- 认输功能
- 精美的界面设计
- 落棋位置标记
- 将军警告提示
- 可移动位置提示

## 许可证

本项目仅供学习和娱乐使用。
